{
  "vercel_json": {
    "$schema": "https://openapi.vercel.sh/vercel.json",
    "version": 2,
    "cleanUrls": true
  },
  "code_layout": {
    "static_site": true,
    "has_api_routes": false,
    "notable_files": [
      "vercel.json",
      "package.json",
      ".github/workflows/*",
      "public/mags-config.json"
    ]
  },
  "endpoints": {
    "status_page": "/check",
    "health": "/health",
    "echo": "/api/echo"
  },
  "cloudflare": {
    "worker_url": "https://tight-snow-2840.messyandmagnetic.workers.dev",
    "cron": {
      "enabled": true,
      "hourly": "/cron/hourly",
      "nightly": "/cron/nightly"
    }
  },
  "sheets": {
    "quiz": "1JCcWIU7Mry540o3dpYlIvR0k4pjsGF743bG8vu8cds0",
    "feedback": "1DdqXoAdV-VQ565aHzJ9W0qsG5IJqpRBf7FE6-HkzZm8"
  },
  "tally": {
    "quiz_form_id": "3qlZQ9",
    "feedback_form_id": "nGPKDo"
  },
  "dash": {
    "bundle_rules_tab": "Rules_Bundles",
    "bundle_links_tab": "Rules_Links",
    "response_tab": "Quiz_Responses",
    "bundle_columns": [
      "bundle_reco",
      "bundle_payment_link"
    ]
  },
  "notes": [
    "Worker forwards Tally JSON to Apps Script intake.",
    "Apps Script computes bundle and attaches Stripe Payment Link."
  ],
  "ops": {
    "status_reporting": {
      "enabled": true,
      "channels": [
        "GitHub PR comments",
        "Telegram"
      ]
    },
    "telegram": {
      "enabled": true,
      "bot_token_secret": "TELEGRAM_BOT_TOKEN",
      "chat_id_secret": "TELEGRAM_CHAT_ID",
      "default_prefix": "[Mags]"
    }
  },
  "project": {
    "owner": "messyandmagnetic",
    "repo": "mags-assistant",
    "deployment": {
      "platform": "vercel",
      "prod_url": "https://mags-assistant.vercel.app",
      "vercel_json": {
        "$schema": "https://openapi.vercel.sh/vercel.json",
        "version": 2,
        "cleanUrls": true
      },
      "node_policy": "20.x (project settings) â€” do not override with 22.x"
    },
    "code_layout": {
      "static_site": true,
      "has_api_routes": false,
      "notable_files": [
        "vercel.json",
        "package.json",
        ".github/workflows/*",
        "public/mags-config.json"
      ]
    }
  },
  "github_actions": {
    "workflows": [
      "cron-runner.yml",
      "drive-review.yml",
      "health-check.yml",
      "nightly-analytics.yml",
      "nightly-trends.yml",
      "preview-check.yml",
      "smoke.yml",
      "housekeeping.yml",
      "memory-clean.yml",
      "link-check.yml",
      "ops-fallback.yml",
      "post-windows.yml",
      "stripe-sync.yml"
    ],
    "policy": {
      "dispatchable": true,
      "default_branch": "main",
      "required_permissions": [
        "contents:write",
        "pull_requests:write",
        "actions:read"
      ]
    },
    "skip_rules": {
      "skip_if_api_base_empty": true
    }
  },
  "secrets": {
    "present": [
      "API_BASE",
      "CRON_SECRET",
      "HQ_DATABASE_ID",
      "NOTION_TOKEN",
      "OPENAI_API_KEY",
      "PROD_URL",
      "TELEGRAM_BOT_TOKEN",
      "TELEGRAM_CHAT_ID",
      "USE_GH_CRON",
      "VERCEL_PROD_URL",
      "VERCEL_PROJECT_ID",
      "VERCEL_TOKEN",
      "WORKER_KEY"
    ],
    "maybe_missing": [
      "WORKER_URL",
      "NOTION_DB_TRENDS"
    ],
    "notes": {
      "API_BASE": "Leave blank or point to your worker only if you actually serve API there. Static site means do not call it.",
      "USE_GH_CRON": "Set to 'true' to let GitHub Actions run scheduled jobs; 'false' if Cloudflare/Vercel crons are used.",
      "WORKER_URL": "Cloudflare Worker base URL if different from cloudflare.worker_url."
    }
  },
  "guard_rails": {
    "vercel_json_rules": [
      "No legacy now-* runtimes",
      "No framework key (Vercel auto-detect)",
      "If you add rewrites/redirects/headers/cleanUrls/trailingSlash then do not include routes"
    ],
    "actions_rules": [
      "Workflows that POST to /api/* must be gated because site is static",
      "If API_BASE is empty or not reachable, skip those jobs instead of failing"
    ]
  },
  "deployment": {
    "prod_url": "https://mags-assistant.vercel.app"
  },
  "notion_brain": {
    "url": "https://www.notion.so/Mags-Task-Manager-24b796c707c18018a017c7b267a6bf61",
    "id": "24b796c707c18018a017c7b267a6bf61",
    "properties": {
      "title": "Item",
      "type": "Type",
      "submission_id": "Submission ID",
      "form_id": "Form ID",
      "email": "Email",
      "name": "Name",
      "phone": "Phone",
      "score": "Score",
      "result_tier": "Result Tier",
      "product_choice": "Product Choice",
      "status": "Status",
      "stripe_link": "Stripe Link",
      "notes": "Notes",
      "created_at": "Created At",
      "updated_at": "Updated At",
      "raw": "Raw",
      "source": "Source",
      "owner": "Owner"
    }
  },
  "intake": {
    "quiz": { "sheet_id": "1JCcWIU7Mry540o3dpYlIvR0k4pjsGF743bG8vu8cds0", "tab": "Quiz_Responses" },
    "feedback": { "sheet_id": "1DdqXoAdV-VQ565aHzJ9W0qsG5IJqpRBf7FE6-HkzZm8", "tab": "Feedback_Responses" },
    "tally": {
      "forms": [
        {
          "form_id": "3qlZQ9",
          "sheet_id": "1JCcWIU7Mry540o3dpYlIvR0k4pjsGF743bG8vu8cds0",
          "tab": "Quiz_Responses"
        },
        {
          "form_id": "nGPKDo",
          "sheet_id": "1DdqXoAdV-VQ565aHzJ9W0qsG5IJqpRBf7FE6-HkzZm8",
          "tab": "Feedback_Responses"
        }
      ]
    }
  },
  "worker": {
    "base": "https://tight-snow-2840.messyandmagnetic.workers.dev",
    "health": "/health",
    "brain_sync": "/brain/sync"
  },
  "tally": { "quiz": "3qlZQ9", "feedback": "nGPKDo" },
  "stripe": {
    "links_live": false,
    "products": {
      "general_donation": "",
      "filing_donation_250": ""
    }
  }
}
