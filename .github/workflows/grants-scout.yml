name: grants-scout
on:
  schedule:
    - cron: '0 10 * * 1'
  workflow_dispatch:

jobs:
  scout:
    runs-on: ubuntu-latest
    env:
      API_BASE: ${{ secrets.WORKER_URL }}
      FETCH_PASS: ${{ secrets.WORKER_KEY }}
    steps:
      - name: Search NM grants
        run: |
          if [ -z "$API_BASE" ]; then echo "missing API_BASE, skipping"; exit 0; fi
          curl -sS -X POST "$API_BASE/grants/scout?state=NM" -H "X-Fetch-Pass: $FETCH_PASS" || true
